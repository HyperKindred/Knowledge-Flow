import{d as C,r as l,H as L,k as V,a as q,o as m,c as B,b as e,f,g as D,A as E,w as v,v as _,z as I,m as T,E as r,O as M,p as N,i as z,_ as A}from"./index-DuB4n2yr.js";import{a as U}from"./axios-B4uVmeYG.js";import{m as F}from"./index-BjJ2-QAr.js";import{L as H}from"./Loading-CtJha2Rr.js";const g=c=>(N("data-v-4401d949"),c=c(),z(),c),O={class:"container"},$=g(()=>e("div",{class:"title"},[e("h2",null,"文本翻译")],-1)),j={class:"text-item"},G={class:"language-switcher"},J=g(()=>e("span",{class:"left-language"},"中文",-1)),K=g(()=>e("span",{class:"right-language"},"英文",-1)),P={class:"loadingarea"},Q=C({__name:"index",setup(c){const s=l(""),u=l(""),o=F(),i=l("0"),h=l(""),d=l(!1),y=()=>{i.value==="0"?(document.querySelector(".left-language").style.left="calc(65% - 30px)",document.querySelector(".right-language").style.left="35%",i.value="1"):(document.querySelector(".left-language").style.left="35%",document.querySelector(".right-language").style.left="calc(65% - 30px)",i.value="0")},x=()=>{if(s.value===""){r({message:"请输入文本",type:"error",duration:5*1e3,grouping:!0});return}b();let t=new FormData;t.append("text",s.value),t.append("mode",i.value),U({method:"post",url:`${o.ipAddress}/api/translate`,data:t,headers:{"Content-Type":"multipart/form-data"}}).then(a=>{let n=a.data;n.ret===0?u.value=n.res:r({message:"翻译失败："+n.msg,type:"error",duration:5*1e3,grouping:!0})}).catch(a=>{console.error("Error posting data:",a),r({message:"翻译失败：网络错误，请稍后重试！",type:"error",duration:5*1e3,grouping:!0})}).finally(()=>{k()})},w=t=>{s.value=t};L(()=>o.select,t=>{t==="translate"&&w(o.content)});const S=async()=>{try{await navigator.clipboard.writeText(u.value),r({message:"内容已复制到剪切板! ",type:"success",duration:5*1e3,grouping:!0})}catch{r({message:"复制失败，请重试! ",type:"error",duration:5*1e3,grouping:!0})}};V(()=>{o.initializeTheme(),h.value=o.theme});const b=()=>{d.value=!0},k=()=>{d.value=!1};return(t,a)=>{const n=q("el-icon");return m(),B("div",O,[$,e("div",j,[e("div",G,[J,e("button",{class:"switch-button",onClick:y},[f(n,null,{default:D(()=>[f(E(M))]),_:1})]),K]),v(e("textarea",{class:"inputarea","onUpdate:modelValue":a[0]||(a[0]=p=>s.value=p),placeholder:"输入文本"},null,512),[[_,s.value]]),e("button",{class:"translate-button",onClick:x},"翻译"),e("div",P,[d.value?(m(),I(H,{key:0})):T("",!0),v(e("textarea",{class:"resultarea","onUpdate:modelValue":a[1]||(a[1]=p=>u.value=p),placeholder:"翻译结果"},null,512),[[_,u.value]])]),e("button",{class:"translate-button",onClick:S},"复制")])])}}}),Z=A(Q,[["__scopeId","data-v-4401d949"]]);export{Z as default};
